<%= render partial: '/users/avatars', locals: {user: @user, edit: true}%>
<%= form_tag("/users/#{@user.id}/actualize", :multipart => true) do -%>
  <%= label_tag 'avatar' %>
  <%= file_field_tag 'file'  %>
  <%= label_tag 'name' %>
  <%= text_field_tag 'name', @user.name, :class => 'valitx', 'data-message' => 'El campo nombre no puede quedar vacio.', 'data-target' => 'message_error_name' %>
  <small id="message_error_name" class="error" style="margin-top: -16px; display:none;"></small>
  <%= label_tag 'email' %>
  <%= email_field_tag 'email', @user.email, :class => 'valitx', 'data-message' => 'El campo email no puede quedar vacio.', 'data-target' => 'message_error_mail'  %>
  <small id="message_error_mail" class="error" style="margin-top: -16px; display:none;"></small>
  <%= label_tag 'birthday' %>
  <%= date_field_tag 'birthday', Date.today.strftime('%d/%m/%Y')%>
  <%= label_tag 'Cedula profesional' %>
  <%= text_field_tag 'cadre_card', @user.cadre_card, :class => 'valitx', 'data-message' => 'El de la cedula email no puede quedar vacio.', 'data-target' => 'message_error_cadre_card' %>
  <small id="message_error_cadre_card" class="error" style="margin-top: -16px; display:none;"></small>
  <%= label_tag 'DirecciÃ³n del consultorio' %>
  <%= text_area_tag 'street_addres', @user.street_addres%>
  <%= label_tag 'Universidad en la que estudio' %>
  <%= text_field_tag 'college', @user.college%>
  <br/>
  <h3>Cambiar password</h3>
  <%= label_tag 'password' %>
  <%= password_field_tag 'password', nil %>
  <%= label_tag 'confirm password' %>
  <%= password_field_tag 'confirm_password', nil %>
  <div><%= submit_tag 'Actualizar', :class => 'button' %></div>
<% end -%>

<script>
  function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#blah').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }
    $("#file").change(function(){
        readURL(this);
  }); 

  $(document).ready(function(){
    VAlForValitx('name');
    VAlForValitx('email');
    VAlForValitx('cadre_card');
  });         
</script>